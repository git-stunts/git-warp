<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#333">Select Node Sequence</text>

  <!-- Panel 1: User clicks node v2 -->
  <g transform="translate(20, 50)">
    <rect width="260" height="240" rx="8" fill="#fff" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
    <rect width="260" height="24" rx="8" fill="#f5f5f5" stroke="#ddd" stroke-width="1"/>
    <text x="130" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#666">Panel 1: User Clicks Node</text>

    <!-- Breadcrumb -->
    <rect x="15" y="32" width="230" height="18" rx="3" fill="#f5f5f5"/>
    <text x="25" y="44" font-family="system-ui, sans-serif" font-size="9" fill="#666">root</text>

    <!-- Skeleton plane with nodes -->
    <rect x="15" y="55" width="230" height="80" rx="4" fill="#fff" stroke="#2196f3" stroke-width="2"/>
    <text x="25" y="68" font-family="system-ui, sans-serif" font-size="9" fill="#2196f3" font-weight="bold">Skeleton G</text>

    <!-- Graph nodes -->
    <circle cx="60" cy="100" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="60" y="104" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v1</text>
    <circle cx="130" cy="90" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="130" y="94" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v2</text>
    <circle cx="200" cy="105" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="200" y="109" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v3</text>
    <line x1="72" y1="98" x2="118" y2="92" stroke="#2196f3" stroke-width="1.5"/>
    <line x1="142" y1="92" x2="188" y2="103" stroke="#2196f3" stroke-width="1.5"/>

    <!-- Cursor clicking v2 -->
    <path d="M145,85 L145,101 L152,95 L148,95 L153,105 L150,106 L145,96 L145,101" fill="#333"/>

    <!-- Attachment plane empty -->
    <rect x="15" y="145" width="230" height="70" rx="4" fill="#fafafa" stroke="#ccc"/>
    <text x="25" y="158" font-family="system-ui, sans-serif" font-size="9" fill="#999">Attachment</text>
    <text x="130" y="185" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#999">Select a node...</text>

    <!-- Caption -->
    <text x="130" y="230" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#333">User clicks node v2</text>
  </g>

  <!-- Arrow 1-2 -->
  <path d="M290,170 L320,170" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Panel 2: Node highlights -->
  <g transform="translate(330, 50)">
    <rect width="260" height="240" rx="8" fill="#fff" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
    <rect width="260" height="24" rx="8" fill="#f5f5f5" stroke="#ddd" stroke-width="1"/>
    <text x="130" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#666">Panel 2: Node Highlights</text>

    <!-- Breadcrumb updating -->
    <rect x="15" y="32" width="230" height="18" rx="3" fill="#e3f2fd"/>
    <text x="25" y="44" font-family="system-ui, sans-serif" font-size="9" fill="#1565c0">root &gt; v2</text>

    <!-- Skeleton plane with highlighted node -->
    <rect x="15" y="55" width="230" height="80" rx="4" fill="#fff" stroke="#2196f3" stroke-width="2"/>
    <text x="25" y="68" font-family="system-ui, sans-serif" font-size="9" fill="#2196f3" font-weight="bold">Skeleton G</text>

    <!-- Graph nodes - v2 glowing -->
    <circle cx="60" cy="100" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="60" y="104" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v1</text>
    <circle cx="130" cy="90" r="16" fill="#bbdefb" stroke="#1565c0" stroke-width="3" filter="url(#glow)"/>
    <text x="130" y="94" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#0d47a1" font-weight="bold">v2</text>
    <circle cx="200" cy="105" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="200" y="109" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v3</text>
    <line x1="72" y1="98" x2="114" y2="92" stroke="#2196f3" stroke-width="1.5"/>
    <line x1="146" y1="92" x2="188" y2="103" stroke="#2196f3" stroke-width="1.5"/>

    <!-- Attachment plane loading -->
    <rect x="15" y="145" width="230" height="70" rx="4" fill="#fafafa" stroke="#ffc107" stroke-width="2"/>
    <text x="25" y="158" font-family="system-ui, sans-serif" font-size="9" fill="#f57f17">Loading attachment...</text>

    <!-- Loading spinner -->
    <circle cx="130" cy="180" r="12" fill="none" stroke="#e0e0e0" stroke-width="2"/>
    <path d="M130,168 A12,12 0 0,1 142,180" fill="none" stroke="#ffc107" stroke-width="2" stroke-linecap="round">
      <animateTransform attributeName="transform" type="rotate" from="0 130 180" to="360 130 180" dur="1s" repeatCount="indefinite"/>
    </path>

    <!-- Caption -->
    <text x="130" y="230" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#333">Node glows, attachment loads</text>
  </g>

  <!-- Arrow 2-3 -->
  <path d="M600,170 L630,170" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Panel 3: Attachment loaded -->
  <g transform="translate(640, 50)">
    <rect width="260" height="240" rx="8" fill="#fff" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
    <rect width="260" height="24" rx="8" fill="#f5f5f5" stroke="#ddd" stroke-width="1"/>
    <text x="130" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#666">Panel 3: Attachment Displayed</text>

    <!-- Breadcrumb -->
    <rect x="15" y="32" width="230" height="18" rx="3" fill="#e3f2fd"/>
    <text x="25" y="44" font-family="system-ui, sans-serif" font-size="9" fill="#1565c0">root &gt; v2</text>

    <!-- Skeleton plane with highlighted node -->
    <rect x="15" y="55" width="230" height="80" rx="4" fill="#fff" stroke="#2196f3" stroke-width="2"/>
    <text x="25" y="68" font-family="system-ui, sans-serif" font-size="9" fill="#2196f3" font-weight="bold">Skeleton G</text>

    <!-- Graph nodes - v2 selected -->
    <circle cx="60" cy="100" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="60" y="104" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v1</text>
    <circle cx="130" cy="90" r="16" fill="#bbdefb" stroke="#1565c0" stroke-width="3"/>
    <text x="130" y="94" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#0d47a1" font-weight="bold">v2</text>
    <circle cx="200" cy="105" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="200" y="109" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v3</text>
    <line x1="72" y1="98" x2="114" y2="92" stroke="#2196f3" stroke-width="1.5"/>
    <line x1="146" y1="92" x2="188" y2="103" stroke="#2196f3" stroke-width="1.5"/>

    <!-- Attachment plane with nested graph -->
    <rect x="15" y="145" width="230" height="70" rx="4" fill="#fff" stroke="#4caf50" stroke-width="2"/>
    <text x="25" y="158" font-family="system-ui, sans-serif" font-size="9" fill="#2e7d32" font-weight="bold">alpha(v2)</text>

    <!-- Nested WARP graph -->
    <circle cx="70" cy="182" r="10" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="70" y="186" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#1b5e20">u1</text>
    <circle cx="130" cy="175" r="10" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="130" y="179" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#1b5e20">u2</text>
    <circle cx="190" cy="185" r="10" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="190" y="189" text-anchor="middle" font-family="system-ui, sans-serif" font-size="7" fill="#1b5e20">u3</text>
    <line x1="80" y1="180" x2="120" y2="177" stroke="#4caf50" stroke-width="1"/>
    <line x1="140" y1="177" x2="180" y2="183" stroke="#4caf50" stroke-width="1"/>

    <!-- Caption -->
    <text x="130" y="230" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#333">Attachment alpha(v2) appears</text>
  </g>

  <!-- Bottom row: Final state with depth badge -->
  <g transform="translate(330, 310)">
    <rect width="260" height="260" rx="8" fill="#fff" stroke="#4caf50" stroke-width="3" filter="url(#shadow)"/>
    <rect width="260" height="24" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="1"/>
    <text x="130" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#2e7d32">Final State: Node Selected</text>

    <!-- Breadcrumb with depth -->
    <rect x="15" y="32" width="175" height="18" rx="3" fill="#e3f2fd"/>
    <text x="25" y="44" font-family="system-ui, sans-serif" font-size="9" fill="#1565c0">root &gt; v2</text>
    <!-- Depth badge -->
    <rect x="195" y="32" width="50" height="18" rx="9" fill="#7e57c2"/>
    <text x="220" y="44" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#fff">depth 1</text>

    <!-- Skeleton plane with selected node -->
    <rect x="15" y="55" width="230" height="90" rx="4" fill="#fff" stroke="#2196f3" stroke-width="2"/>
    <text x="25" y="68" font-family="system-ui, sans-serif" font-size="9" fill="#2196f3" font-weight="bold">Skeleton G</text>

    <!-- Graph nodes - v2 selected with connection line -->
    <circle cx="60" cy="105" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="60" y="109" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v1</text>
    <circle cx="130" cy="95" r="16" fill="#bbdefb" stroke="#1565c0" stroke-width="3"/>
    <text x="130" y="99" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#0d47a1" font-weight="bold">v2</text>
    <circle cx="200" cy="110" r="12" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="200" y="114" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1565c0">v3</text>
    <line x1="72" y1="103" x2="114" y2="97" stroke="#2196f3" stroke-width="1.5"/>
    <line x1="146" y1="97" x2="188" y2="108" stroke="#2196f3" stroke-width="1.5"/>

    <!-- Connection line from v2 to attachment -->
    <path d="M130,111 L130,150" stroke="#9e9e9e" stroke-width="1" stroke-dasharray="4,2"/>

    <!-- Attachment plane with nested graph -->
    <rect x="15" y="155" width="230" height="80" rx="4" fill="#fff" stroke="#4caf50" stroke-width="2"/>
    <text x="25" y="170" font-family="system-ui, sans-serif" font-size="9" fill="#2e7d32" font-weight="bold">alpha(v2) - Nested WARP</text>

    <!-- Nested WARP graph -->
    <circle cx="60" cy="205" r="11" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="60" y="209" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1b5e20">u1</text>
    <circle cx="130" cy="195" r="11" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="130" y="199" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1b5e20">u2</text>
    <circle cx="200" cy="205" r="11" fill="#c8e6c9" stroke="#4caf50" stroke-width="2"/>
    <text x="200" y="209" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#1b5e20">u3</text>
    <line x1="71" y1="203" x2="119" y2="197" stroke="#4caf50" stroke-width="1.5"/>
    <line x1="141" y1="197" x2="189" y2="203" stroke="#4caf50" stroke-width="1.5"/>

    <!-- Status bar -->
    <rect x="15" y="242" width="230" height="14" rx="2" fill="#f5f5f5"/>
    <text x="25" y="252" font-family="monospace" font-size="8" fill="#666">3 nodes | 2 edges | Click u1/u2/u3 to drill</text>
  </g>

  <!-- Arrow from panel 3 to final -->
  <path d="M770,290 L770,340 L600,340" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

</svg>
