<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f5f5f5"/>
      <stop offset="100%" style="stop-color:#e0e0e0"/>
    </linearGradient>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#42a5f5"/>
      <stop offset="100%" style="stop-color:#1976d2"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#66bb6a"/>
      <stop offset="100%" style="stop-color:#388e3c"/>
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffb74d"/>
      <stop offset="100%" style="stop-color:#f57c00"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="900" height="600" fill="url(#bgGrad)"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#333">Start Replay Sequence</text>

  <!-- Panel 1: Click Replay Button -->
  <g transform="translate(20, 55)">
    <rect width="270" height="240" rx="12" fill="white" filter="url(#shadow)"/>
    <rect width="270" height="30" rx="12" fill="url(#blueGrad)"/>
    <rect x="0" y="15" width="270" height="15" fill="url(#blueGrad)"/>
    <text x="135" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Panel 1: Click Replay</text>

    <!-- Mock UI -->
    <rect x="15" y="45" width="240" height="180" rx="6" fill="#fafafa" stroke="#ddd"/>

    <!-- Boundary summary (compact) -->
    <rect x="25" y="55" width="220" height="60" rx="4" fill="#e3f2fd"/>
    <text x="35" y="72" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1565c0">Boundary Loaded</text>
    <text x="35" y="88" font-family="monospace" font-size="9" fill="#333">U_0: 4b825dc...fbee4904</text>
    <text x="35" y="102" font-family="monospace" font-size="9" fill="#333">Payload: 42 patches ready</text>

    <!-- Replay button with hover effect -->
    <rect x="60" y="130" width="150" height="40" rx="8" fill="url(#blueGrad)" filter="url(#glow)"/>
    <polygon points="115,142 115,160 135,151" fill="white"/>
    <text x="155" y="155" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Replay</text>

    <!-- Cursor clicking -->
    <polygon points="145,175 155,195 148,195 152,210 145,210 141,195 134,195" fill="#333"/>
    <circle cx="145" cy="175" r="8" fill="none" stroke="#2196f3" stroke-width="2" opacity="0.6"/>

    <!-- Click ripple effect -->
    <circle cx="135" cy="150" r="20" fill="none" stroke="#2196f3" stroke-width="1" opacity="0.3"/>
    <circle cx="135" cy="150" r="30" fill="none" stroke="#2196f3" stroke-width="1" opacity="0.15"/>
  </g>

  <!-- Arrow 1->2 -->
  <g transform="translate(295, 175)">
    <path d="M0,0 L25,0" stroke="#ff9800" stroke-width="3" fill="none"/>
    <polygon points="25,-6 37,0 25,6" fill="#ff9800"/>
  </g>

  <!-- Panel 2: Loading Initial State -->
  <g transform="translate(315, 55)">
    <rect width="270" height="240" rx="12" fill="white" filter="url(#shadow)"/>
    <rect width="270" height="30" rx="12" fill="url(#orangeGrad)"/>
    <rect x="0" y="15" width="270" height="15" fill="url(#orangeGrad)"/>
    <text x="135" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Panel 2: Loading U_0</text>

    <!-- Split view mockup -->
    <rect x="15" y="45" width="240" height="180" rx="6" fill="#fafafa" stroke="#ddd"/>

    <!-- Left: Boundary pane -->
    <rect x="20" y="50" width="110" height="170" rx="4" fill="#e3f2fd"/>
    <text x="75" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1565c0">BOUNDARY</text>
    <rect x="30" y="75" width="90" height="40" rx="3" fill="white" stroke="#2196f3"/>
    <text x="75" y="92" text-anchor="middle" font-family="monospace" font-size="8" fill="#333">U_0</text>
    <text x="75" y="105" text-anchor="middle" font-family="monospace" font-size="7" fill="#666">4b825dc...</text>

    <!-- Payload list -->
    <rect x="30" y="125" width="90" height="85" rx="3" fill="white" stroke="#ff9800"/>
    <text x="75" y="138" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#e65100">Payload</text>
    <text x="35" y="152" font-family="monospace" font-size="7" fill="#666">mu_0</text>
    <text x="35" y="163" font-family="monospace" font-size="7" fill="#666">mu_1</text>
    <text x="35" y="174" font-family="monospace" font-size="7" fill="#666">...</text>
    <text x="35" y="185" font-family="monospace" font-size="7" fill="#666">mu_41</text>

    <!-- Right: Interior pane (loading) -->
    <rect x="135" y="50" width="115" height="170" rx="4" fill="#f5f5f5"/>
    <text x="193" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#666">INTERIOR</text>

    <!-- Loading spinner -->
    <circle cx="193" cy="120" r="20" fill="none" stroke="#e0e0e0" stroke-width="3"/>
    <path d="M193 100 A20 20 0 0 1 213 120" stroke="#ff9800" stroke-width="3" fill="none" stroke-linecap="round"/>

    <text x="193" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Loading U_0...</text>

    <!-- Arrow from boundary to interior -->
    <path d="M125 95 L140 95" stroke="#ff9800" stroke-width="2" stroke-dasharray="4,2"/>
    <polygon points="140,92 147,95 140,98" fill="#ff9800"/>
  </g>

  <!-- Arrow 2->3 -->
  <g transform="translate(590, 175)">
    <path d="M0,0 L25,0" stroke="#4caf50" stroke-width="3" fill="none"/>
    <polygon points="25,-6 37,0 25,6" fill="#4caf50"/>
  </g>

  <!-- Panel 3: U0 Appears -->
  <g transform="translate(610, 55)">
    <rect width="270" height="240" rx="12" fill="white" filter="url(#shadow)"/>
    <rect width="270" height="30" rx="12" fill="url(#greenGrad)"/>
    <rect x="0" y="15" width="270" height="15" fill="url(#greenGrad)"/>
    <text x="135" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Panel 3: U_0 Loaded</text>

    <!-- Split view mockup -->
    <rect x="15" y="45" width="240" height="180" rx="6" fill="#fafafa" stroke="#ddd"/>

    <!-- Left: Boundary pane -->
    <rect x="20" y="50" width="110" height="170" rx="4" fill="#e3f2fd"/>
    <text x="75" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1565c0">BOUNDARY</text>
    <rect x="30" y="75" width="90" height="40" rx="3" fill="white" stroke="#4caf50" stroke-width="2"/>
    <text x="75" y="92" text-anchor="middle" font-family="monospace" font-size="8" fill="#333">U_0</text>
    <circle cx="105" cy="82" r="6" fill="#4caf50"/>
    <path d="M102 82 L104 84 L108 80" stroke="white" stroke-width="1.5" fill="none"/>
    <text x="75" y="105" text-anchor="middle" font-family="monospace" font-size="7" fill="#666">4b825dc...</text>

    <!-- Payload list with first highlighted -->
    <rect x="30" y="125" width="90" height="85" rx="3" fill="white" stroke="#ff9800"/>
    <text x="75" y="138" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#e65100">Payload</text>
    <rect x="33" y="145" width="84" height="12" rx="2" fill="#fff3e0"/>
    <text x="38" y="154" font-family="monospace" font-size="7" fill="#e65100">mu_0 (next)</text>
    <text x="38" y="167" font-family="monospace" font-size="7" fill="#666">mu_1</text>
    <text x="38" y="178" font-family="monospace" font-size="7" fill="#666">...</text>
    <text x="38" y="189" font-family="monospace" font-size="7" fill="#666">mu_41</text>

    <!-- Right: Interior pane with U0 -->
    <rect x="135" y="50" width="115" height="170" rx="4" fill="#e8f5e9"/>
    <text x="193" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#2e7d32">INTERIOR</text>

    <!-- U0 state visualization -->
    <rect x="150" y="80" width="85" height="70" rx="6" fill="white" stroke="#4caf50" stroke-width="2" filter="url(#glow)"/>
    <text x="193" y="97" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">U_0</text>

    <!-- Mini graph inside -->
    <circle cx="170" cy="118" r="6" fill="#2196f3"/>
    <circle cx="193" cy="128" r="6" fill="#2196f3"/>
    <circle cx="215" cy="115" r="6" fill="#2196f3"/>
    <line x1="175" y1="120" x2="188" y2="126" stroke="#666" stroke-width="1"/>
    <line x1="198" y1="126" x2="210" y2="117" stroke="#666" stroke-width="1"/>

    <!-- State info -->
    <text x="193" y="165" text-anchor="middle" font-family="monospace" font-size="8" fill="#333">15 nodes</text>
    <text x="193" y="178" text-anchor="middle" font-family="monospace" font-size="8" fill="#333">23 edges</text>

    <!-- Progress bar -->
    <rect x="145" y="195" width="95" height="15" rx="3" fill="#e0e0e0"/>
    <rect x="145" y="195" width="2" height="15" rx="3" fill="#4caf50"/>
    <text x="193" y="206" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">0/42 ticks</text>
  </g>

  <!-- Bottom panel: Detailed view of the transition -->
  <g transform="translate(20, 310)">
    <rect width="860" height="270" rx="12" fill="white" filter="url(#shadow)"/>
    <rect width="860" height="30" rx="12" fill="#37474f"/>
    <rect x="0" y="15" width="860" height="15" fill="#37474f"/>
    <text x="430" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Replay Initialization Complete</text>

    <!-- Timeline representation -->
    <g transform="translate(30, 60)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Worldline Timeline (Ready for Reconstruction)</text>

      <!-- Timeline axis -->
      <line x1="0" y1="40" x2="800" y2="40" stroke="#ccc" stroke-width="2"/>

      <!-- U0 node (filled) -->
      <circle cx="50" cy="40" r="15" fill="#4caf50" stroke="white" stroke-width="2"/>
      <text x="50" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">U_0</text>
      <text x="50" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Loaded</text>

      <!-- Arrow to first pending -->
      <path d="M70 40 L110 40" stroke="#ff9800" stroke-width="2" stroke-dasharray="5,3"/>
      <polygon points="110,36 118,40 110,44" fill="#ff9800"/>

      <!-- U1 node (pending) -->
      <circle cx="150" cy="40" r="15" fill="none" stroke="#ff9800" stroke-width="2" stroke-dasharray="3,2"/>
      <text x="150" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ff9800">U_1</text>
      <text x="150" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ff9800">mu_0</text>

      <!-- More pending nodes -->
      <path d="M170 40 L210 40" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/>
      <circle cx="250" cy="40" r="15" fill="none" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="3,2"/>
      <text x="250" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#999">U_2</text>

      <path d="M270 40 L310 40" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/>
      <text x="350" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#999">...</text>

      <!-- Final node -->
      <path d="M380 40 L420 40" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="5,3"/>
      <circle cx="460" cy="40" r="15" fill="none" stroke="#e0e0e0" stroke-width="2" stroke-dasharray="3,2"/>
      <text x="460" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#999">U_42</text>
      <text x="460" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#999">Final</text>

      <!-- Legend -->
      <g transform="translate(550, -10)">
        <circle cx="15" cy="40" r="10" fill="#4caf50"/>
        <text x="35" y="44" font-family="Arial, sans-serif" font-size="10" fill="#333">Reconstructed</text>

        <circle cx="150" cy="40" r="10" fill="none" stroke="#ff9800" stroke-width="2"/>
        <text x="170" y="44" font-family="Arial, sans-serif" font-size="10" fill="#333">Next</text>

        <circle cx="250" cy="40" r="10" fill="none" stroke="#e0e0e0" stroke-width="2"/>
        <text x="270" y="44" font-family="Arial, sans-serif" font-size="10" fill="#333">Pending</text>
      </g>
    </g>

    <!-- Status info -->
    <g transform="translate(30, 140)">
      <rect width="380" height="100" rx="8" fill="#e8f5e9" stroke="#4caf50"/>
      <text x="15" y="25" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2e7d32">Replay Status</text>

      <g transform="translate(15, 45)">
        <circle r="6" fill="#4caf50"/>
        <path d="M-3 0 L-1 2 L3 -2" stroke="white" stroke-width="1.5" fill="none"/>
        <text x="15" y="4" font-family="Arial, sans-serif" font-size="10" fill="#333">Initial state U_0 loaded and verified</text>
      </g>
      <g transform="translate(15, 65)">
        <circle r="6" fill="#ff9800"/>
        <text x="15" y="4" font-family="Arial, sans-serif" font-size="10" fill="#333">42 patches queued for application</text>
      </g>
      <g transform="translate(15, 85)">
        <circle r="6" fill="#2196f3"/>
        <text x="15" y="4" font-family="Arial, sans-serif" font-size="10" fill="#333">Tick-by-tick reconstruction ready</text>
      </g>
    </g>

    <!-- Progress info -->
    <g transform="translate(450, 140)">
      <rect width="380" height="100" rx="8" fill="#fff3e0" stroke="#ff9800"/>
      <text x="15" y="25" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e65100">Progress: 0/42 Ticks</text>

      <!-- Large progress bar -->
      <rect x="15" y="45" width="350" height="20" rx="10" fill="#e0e0e0"/>
      <rect x="15" y="45" width="8" height="20" rx="10" fill="#4caf50"/>

      <text x="190" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Estimated time remaining: ~2.5 seconds</text>
    </g>
  </g>
</svg>