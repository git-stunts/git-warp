<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#333">Temporal Logic Satisfaction - Interaction Modes</text>

  <!-- Panel 1: Formula Entry with Syntax Highlighting -->
  <g transform="translate(20, 50)">
    <rect width="420" height="240" rx="8" fill="#fff" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
    <rect width="420" height="24" rx="8" fill="#e3f2fd" stroke="#2196f3" stroke-width="1"/>
    <text x="210" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#1565c0" font-weight="bold">Mode 1: Formula Entry</text>

    <!-- Formula input box -->
    <rect x="15" y="35" width="390" height="45" rx="4" fill="#1e1e1e" stroke="#444"/>
    <text x="25" y="52" font-family="monospace" font-size="10" fill="#808080">// Enter CTL* formula:</text>
    <!-- Syntax highlighted formula -->
    <text x="25" y="70" font-family="monospace" font-size="13">
      <tspan fill="#c586c0">A</tspan>
      <tspan fill="#fff"> </tspan>
      <tspan fill="#c586c0">G</tspan>
      <tspan fill="#fff"> </tspan>
      <tspan fill="#c586c0">F</tspan>
      <tspan fill="#fff"> </tspan>
      <tspan fill="#9cdcfe">p_expose</tspan>
    </text>
    <!-- Cursor -->
    <rect x="143" y="58" width="2" height="15" fill="#569cd6">
      <animate attributeName="opacity" values="1;0;1" dur="1s" repeatCount="indefinite"/>
    </rect>

    <!-- Operator palette -->
    <text x="20" y="100" font-family="system-ui, sans-serif" font-size="10" fill="#666">Path Quantifiers:</text>
    <g transform="translate(15, 105)">
      <rect width="28" height="22" rx="3" fill="#c586c0" opacity="0.2" stroke="#c586c0"/>
      <text x="14" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#c586c0" font-weight="bold">A</text>
    </g>
    <g transform="translate(48, 105)">
      <rect width="28" height="22" rx="3" fill="#c586c0" opacity="0.2" stroke="#c586c0"/>
      <text x="14" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#c586c0" font-weight="bold">E</text>
    </g>

    <text x="95" y="100" font-family="system-ui, sans-serif" font-size="10" fill="#666">Temporal Operators:</text>
    <g transform="translate(90, 105)">
      <rect width="28" height="22" rx="3" fill="#569cd6" opacity="0.2" stroke="#569cd6"/>
      <text x="14" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#569cd6" font-weight="bold">G</text>
    </g>
    <g transform="translate(123, 105)">
      <rect width="28" height="22" rx="3" fill="#569cd6" opacity="0.2" stroke="#569cd6"/>
      <text x="14" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#569cd6" font-weight="bold">F</text>
    </g>
    <g transform="translate(156, 105)">
      <rect width="28" height="22" rx="3" fill="#569cd6" opacity="0.2" stroke="#569cd6"/>
      <text x="14" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#569cd6" font-weight="bold">X</text>
    </g>
    <g transform="translate(189, 105)">
      <rect width="28" height="22" rx="3" fill="#569cd6" opacity="0.2" stroke="#569cd6"/>
      <text x="14" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#569cd6" font-weight="bold">U</text>
    </g>

    <text x="240" y="100" font-family="system-ui, sans-serif" font-size="10" fill="#666">Logic:</text>
    <g transform="translate(235, 105)">
      <rect width="24" height="22" rx="3" fill="#dcdcaa" opacity="0.2" stroke="#dcdcaa"/>
      <text x="12" y="15" text-anchor="middle" font-family="monospace" font-size="11" fill="#dcdcaa" font-weight="bold">-</text>
    </g>
    <g transform="translate(264, 105)">
      <rect width="24" height="22" rx="3" fill="#dcdcaa" opacity="0.2" stroke="#dcdcaa"/>
      <text x="12" y="16" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#dcdcaa" font-weight="bold">/\</text>
    </g>
    <g transform="translate(293, 105)">
      <rect width="24" height="22" rx="3" fill="#dcdcaa" opacity="0.2" stroke="#dcdcaa"/>
      <text x="12" y="16" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#dcdcaa" font-weight="bold">\/</text>
    </g>

    <!-- Propositions -->
    <text x="20" y="148" font-family="system-ui, sans-serif" font-size="10" fill="#666">Atomic Propositions:</text>
    <g transform="translate(15, 153)">
      <rect width="70" height="20" rx="3" fill="#9cdcfe" opacity="0.15" stroke="#9cdcfe"/>
      <text x="35" y="14" text-anchor="middle" font-family="monospace" font-size="9" fill="#9cdcfe">p_expose</text>
    </g>
    <g transform="translate(90, 153)">
      <rect width="60" height="20" rx="3" fill="#9cdcfe" opacity="0.15" stroke="#9cdcfe"/>
      <text x="30" y="14" text-anchor="middle" font-family="monospace" font-size="9" fill="#9cdcfe">p_safe</text>
    </g>
    <g transform="translate(155, 153)">
      <rect width="65" height="20" rx="3" fill="#9cdcfe" opacity="0.15" stroke="#9cdcfe"/>
      <text x="32" y="14" text-anchor="middle" font-family="monospace" font-size="9" fill="#9cdcfe">p_merge</text>
    </g>

    <!-- Parse result -->
    <rect x="15" y="185" width="390" height="40" rx="4" fill="#f5f5f5" stroke="#ccc"/>
    <text x="25" y="202" font-family="system-ui, sans-serif" font-size="10" fill="#666">Parse tree:</text>
    <text x="25" y="218" font-family="monospace" font-size="10" fill="#2196f3">A( G( F( p_expose ) ) )</text>
    <circle cx="385" cy="205" r="10" fill="#4caf50"/>
    <text x="385" y="209" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#fff" font-weight="bold">ok</text>
  </g>

  <!-- Panel 2: Chronos Evaluation (per-state results) -->
  <g transform="translate(460, 50)">
    <rect width="420" height="240" rx="8" fill="#fff" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
    <rect width="420" height="24" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="1"/>
    <text x="210" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#2e7d32" font-weight="bold">Mode 2: Chronos Evaluation (Single Path)</text>

    <!-- Formula display -->
    <text x="20" y="45" font-family="system-ui, sans-serif" font-size="10" fill="#666">Evaluating:</text>
    <text x="80" y="45" font-family="monospace" font-size="11">
      <tspan fill="#c586c0">G</tspan>
      <tspan fill="#333"> </tspan>
      <tspan fill="#c586c0">F</tspan>
      <tspan fill="#333"> </tspan>
      <tspan fill="#9cdcfe">p_expose</tspan>
    </text>
    <text x="185" y="45" font-family="system-ui, sans-serif" font-size="9" fill="#666">(on single worldline)</text>

    <!-- Worldline with states -->
    <g transform="translate(30, 65)">
      <!-- States -->
      <circle cx="0" cy="30" r="22" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
      <text x="0" y="27" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U0</text>
      <text x="0" y="40" text-anchor="middle" font-family="monospace" font-size="8" fill="#4caf50">F ok</text>

      <line x1="22" y1="30" x2="58" y2="30" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

      <circle cx="80" cy="30" r="22" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
      <text x="80" y="27" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U1</text>
      <text x="80" y="40" text-anchor="middle" font-family="monospace" font-size="8" fill="#4caf50">F ok</text>

      <line x1="102" y1="30" x2="138" y2="30" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

      <circle cx="160" cy="30" r="22" fill="#c8e6c9" stroke="#2e7d32" stroke-width="3"/>
      <text x="160" y="27" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U2</text>
      <text x="160" y="40" text-anchor="middle" font-family="monospace" font-size="8" fill="#2e7d32">p=T</text>

      <line x1="182" y1="30" x2="218" y2="30" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

      <circle cx="240" cy="30" r="22" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
      <text x="240" y="27" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U3</text>
      <text x="240" y="40" text-anchor="middle" font-family="monospace" font-size="8" fill="#4caf50">F ok</text>

      <line x1="262" y1="30" x2="298" y2="30" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

      <circle cx="320" cy="30" r="22" fill="#c8e6c9" stroke="#2e7d32" stroke-width="3"/>
      <text x="320" y="27" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U4</text>
      <text x="320" y="40" text-anchor="middle" font-family="monospace" font-size="8" fill="#2e7d32">p=T</text>

      <!-- G scope bracket -->
      <path d="M-22,60 L-22,70 L342,70 L342,60" fill="none" stroke="#2196f3" stroke-width="1.5"/>
      <text x="160" y="85" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#2196f3">G F p_expose scope</text>
    </g>

    <!-- Result panel -->
    <rect x="20" y="165" width="380" height="60" rx="4" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <circle cx="45" cy="195" r="18" fill="#4caf50"/>
    <text x="45" y="200" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" fill="#fff" font-weight="bold">ok</text>
    <text x="75" y="185" font-family="system-ui, sans-serif" font-size="11" fill="#333" font-weight="bold">SATISFIED on this worldline</text>
    <text x="75" y="200" font-family="system-ui, sans-serif" font-size="10" fill="#666">p_expose becomes true at U2, U4, ...</text>
    <text x="75" y="215" font-family="system-ui, sans-serif" font-size="10" fill="#666">Every state can reach a future where p holds</text>
  </g>

  <!-- Panel 3: Aion Evaluation (all paths) -->
  <g transform="translate(20, 310)">
    <rect width="420" height="260" rx="8" fill="#fff" stroke="#ddd" stroke-width="2" filter="url(#shadow)"/>
    <rect width="420" height="24" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
    <text x="210" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#e65100" font-weight="bold">Mode 3: Aion Evaluation (All Paths)</text>

    <!-- Formula display -->
    <text x="20" y="45" font-family="system-ui, sans-serif" font-size="10" fill="#666">Evaluating:</text>
    <text x="80" y="45" font-family="monospace" font-size="11">
      <tspan fill="#c586c0">A</tspan>
      <tspan fill="#333"> </tspan>
      <tspan fill="#c586c0">G</tspan>
      <tspan fill="#333"> </tspan>
      <tspan fill="#c586c0">F</tspan>
      <tspan fill="#333"> </tspan>
      <tspan fill="#9cdcfe">p_expose</tspan>
    </text>
    <text x="200" y="45" font-family="system-ui, sans-serif" font-size="9" fill="#666">(on ALL paths in multiway)</text>

    <!-- Multiway graph -->
    <g transform="translate(40, 55)">
      <!-- Initial states -->
      <circle cx="0" cy="50" r="20" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
      <text x="0" y="54" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U0</text>

      <line x1="20" y1="50" x2="55" y2="50" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

      <circle cx="75" cy="50" r="20" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
      <text x="75" y="54" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U1</text>

      <!-- Branch point -->
      <circle cx="75" cy="50" r="3" fill="#ff9800"/>

      <!-- Upper path (satisfied) -->
      <line x1="92" y1="42" x2="128" y2="25" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)"/>
      <circle cx="150" cy="15" r="20" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
      <text x="150" y="12" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U2</text>
      <text x="150" y="24" text-anchor="middle" font-family="monospace" font-size="8" fill="#2e7d32">p=T</text>

      <line x1="170" y1="15" x2="205" y2="15" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow)"/>
      <circle cx="225" cy="15" r="20" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
      <text x="225" y="19" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U3</text>

      <line x1="245" y1="15" x2="280" y2="15" stroke="#4caf50" stroke-width="1.5" stroke-dasharray="4"/>
      <text x="295" y="19" font-family="system-ui, sans-serif" font-size="9" fill="#4caf50">ok</text>

      <!-- Lower path (violated) -->
      <line x1="92" y1="58" x2="128" y2="75" stroke="#f44336" stroke-width="2" marker-end="url(#arrow)"/>
      <circle cx="150" cy="85" r="20" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
      <text x="150" y="82" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U2'</text>
      <text x="150" y="94" text-anchor="middle" font-family="monospace" font-size="8" fill="#c62828">p=F</text>

      <line x1="170" y1="85" x2="205" y2="85" stroke="#f44336" stroke-width="2" marker-end="url(#arrow)"/>
      <circle cx="225" cy="85" r="20" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
      <text x="225" y="82" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U3'</text>
      <text x="225" y="94" text-anchor="middle" font-family="monospace" font-size="8" fill="#c62828">p=F</text>

      <line x1="245" y1="85" x2="280" y2="85" stroke="#f44336" stroke-width="1.5" stroke-dasharray="4"/>
      <text x="295" y="89" font-family="system-ui, sans-serif" font-size="9" fill="#f44336">never!</text>
    </g>

    <!-- Result panel -->
    <rect x="20" y="175" width="380" height="70" rx="4" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
    <circle cx="45" cy="210" r="18" fill="#f44336"/>
    <text x="45" y="215" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" fill="#fff" font-weight="bold">X</text>
    <text x="75" y="195" font-family="system-ui, sans-serif" font-size="11" fill="#333" font-weight="bold">VIOLATED - A G F p_expose fails</text>
    <text x="75" y="212" font-family="system-ui, sans-serif" font-size="10" fill="#666">Path U0 -&gt; U1 -&gt; U2' -&gt; U3' -&gt; ... never satisfies p</text>
    <text x="75" y="229" font-family="system-ui, sans-serif" font-size="10" fill="#c62828">Press [C] to view counterexample</text>
  </g>

  <!-- Panel 4: Counterexample Mode -->
  <g transform="translate(460, 310)">
    <rect width="420" height="260" rx="8" fill="#fff" stroke="#f44336" stroke-width="3" filter="url(#shadow)"/>
    <rect width="420" height="24" rx="8" fill="#ffebee" stroke="#f44336" stroke-width="1"/>
    <text x="210" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#c62828" font-weight="bold">Mode 4: Counterexample Navigation</text>

    <!-- Counterexample path highlight -->
    <g transform="translate(30, 40)">
      <!-- Glow effect for path -->
      <line x1="15" y1="40" x2="350" y2="40" stroke="#f44336" stroke-width="8" opacity="0.2"/>

      <!-- States on counterexample -->
      <circle cx="15" cy="40" r="22" fill="#fff" stroke="#f44336" stroke-width="3"/>
      <text x="15" y="37" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U0</text>
      <text x="15" y="50" text-anchor="middle" font-family="monospace" font-size="8" fill="#f44336">p=F</text>

      <line x1="37" y1="40" x2="68" y2="40" stroke="#f44336" stroke-width="3" marker-end="url(#arrow)"/>

      <circle cx="90" cy="40" r="22" fill="#fff" stroke="#f44336" stroke-width="3"/>
      <text x="90" y="37" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U1</text>
      <text x="90" y="50" text-anchor="middle" font-family="monospace" font-size="8" fill="#f44336">p=F</text>

      <line x1="112" y1="40" x2="143" y2="40" stroke="#f44336" stroke-width="3" marker-end="url(#arrow)"/>

      <!-- Current inspection point -->
      <circle cx="165" cy="40" r="22" fill="#ffebee" stroke="#c62828" stroke-width="4"/>
      <text x="165" y="37" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U2'</text>
      <text x="165" y="50" text-anchor="middle" font-family="monospace" font-size="8" fill="#c62828">p=F</text>
      <!-- Selection indicator -->
      <circle cx="165" cy="40" r="28" fill="none" stroke="#c62828" stroke-width="1" stroke-dasharray="3,3">
        <animate attributeName="stroke-dashoffset" from="0" to="12" dur="1s" repeatCount="indefinite"/>
      </circle>

      <line x1="187" y1="40" x2="218" y2="40" stroke="#f44336" stroke-width="3" marker-end="url(#arrow)"/>

      <circle cx="240" cy="40" r="22" fill="#fff" stroke="#f44336" stroke-width="3"/>
      <text x="240" y="37" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#333">U3'</text>
      <text x="240" y="50" text-anchor="middle" font-family="monospace" font-size="8" fill="#f44336">p=F</text>

      <line x1="262" y1="40" x2="293" y2="40" stroke="#f44336" stroke-width="3" marker-end="url(#arrow)"/>

      <circle cx="315" cy="40" r="22" fill="#fff" stroke="#f44336" stroke-width="3"/>
      <text x="315" y="37" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">...</text>
      <text x="315" y="50" text-anchor="middle" font-family="monospace" font-size="8" fill="#f44336">p=F</text>
    </g>

    <!-- Explanation panel -->
    <rect x="20" y="115" width="380" height="75" rx="4" fill="#fff8e1" stroke="#ffc107" stroke-width="1"/>
    <text x="30" y="132" font-family="system-ui, sans-serif" font-size="10" fill="#333" font-weight="bold">Why this path violates A G F p_expose:</text>
    <text x="30" y="150" font-family="system-ui, sans-serif" font-size="10" fill="#666">1. p_expose is NEVER true on this infinite path</text>
    <text x="30" y="165" font-family="system-ui, sans-serif" font-size="10" fill="#666">2. Therefore F p_expose fails at every state</text>
    <text x="30" y="180" font-family="system-ui, sans-serif" font-size="10" fill="#666">3. Therefore G F p_expose fails for this path</text>

    <!-- Navigation controls -->
    <rect x="20" y="200" width="380" height="45" rx="4" fill="#f5f5f5" stroke="#ccc"/>
    <text x="30" y="218" font-family="system-ui, sans-serif" font-size="10" fill="#666">Navigation:</text>
    <g transform="translate(100, 205)">
      <rect width="45" height="28" rx="4" fill="#fff" stroke="#ccc"/>
      <text x="22" y="18" text-anchor="middle" font-family="monospace" font-size="10" fill="#333">[&lt;-]</text>
    </g>
    <g transform="translate(150, 205)">
      <rect width="45" height="28" rx="4" fill="#fff" stroke="#ccc"/>
      <text x="22" y="18" text-anchor="middle" font-family="monospace" font-size="10" fill="#333">[-&gt;]</text>
    </g>
    <g transform="translate(210, 205)">
      <rect width="80" height="28" rx="4" fill="#2196f3" stroke="#1565c0"/>
      <text x="40" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#fff">Inspect U2'</text>
    </g>
    <g transform="translate(300, 205)">
      <rect width="90" height="28" rx="4" fill="#fff" stroke="#ccc"/>
      <text x="45" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">[Esc] Exit</text>
    </g>
  </g>

  <!-- Flow arrows between panels -->
  <path d="M440,170 L450,170" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M230,290 L230,300" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M440,440 L450,440" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

</svg>
